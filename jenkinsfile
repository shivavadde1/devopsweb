pipeline{
    agent any 
    tools{
        maven 'local_maven'
  }
  stages{
     stage ('Build'){
       steps{
           bat 'clean mvn package'
            script: ''' @echo off
                            return_1_if_success.exe   // command which returns 1 in case of success, 0 otherwise
                            IF %ERRORLEVEL% EQU 1 (exit /B 0) ELSE (exit /B 1)'''
        
       }
       post{
          success{
              echo "Archiving the Artifacts"
          archiveArtifacts artifacts: '**/target/*.war'
         }
     }
   }
stage ('Deploy to tomcat server') {
     steps{
         deploy adapters: [tomcat9(credentialsId: 'tomcat', path: '', url: 'http://localhost:8082/')], contextPath: null, war: '**/*.war'
          }
       }
    }
   } 
